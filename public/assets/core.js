!function(){"use strict";function t(t,e,i,r,n){function o(){if(w)try{for(var t=0;t<arguments.length;t++)console.log(arguments[t])}catch(e){}}function s(r,n,o,s){var c,p,a;return a=s.hasOwnProperty("ssl")?s.ssl:n.ssl,p=new i(r).expand(t.extend({wid:n.id,api:m.api,host:m.host,cdn:m.cdn,scheme:a?"https":"http"},o)),c=new e(p),s.args&&c.addSearch(n.search||{}),p=decodeURIComponent(c.href())}function c(t,e){this.init(t,e)}function p(t){this.init(t)}function a(e,i,r){var n,p,a={wid:e.id,section:e.section};o("GET WEBINAR BY ID",JSON.stringify(a)),n=m.preview?s("/webinar/preview-data/{section}/{wid}/",{},a,{}):s("{scheme}://{cdn}/w/{wid}/conf/{section}.json",{},a,{ssl:!0}),o("GET WEBINAR DATA",n),t.getJSON(n).promise().done(function(t){i(new c(t,e.section))}).fail(function(){p=s("{scheme}://{host}/w/{wid}/error{?error*}",{},t.extend({},a,{error:{code:"webinar-data-error",ref:a.section}}),{ssl:!0}),r?r(e,p):d(e,p)})}function h(t,e,i){try{e(new c(t,t.section))}catch(r){i?i(t):d(t)}}function d(t,e){e&&window.location.replace(e)}function u(){try{return window.self!==window.top}catch(t){return!0}}var w,l=new e;try{w=localStorage.hasOwnProperty("DEBUG")}catch(f){w=!1}var g=window.BlinkWebinars||{},m=t.extend({},{api:"app.blinkwebinars.com",host:"events.blinkwebinars.com",cdn:"assets.blinkwebinars.com",preview:!1},{api:g.api,host:g.host,cdn:g.cdn,preview:g.preview});return o("OPTIONS",JSON.stringify(m)),o(m.preview?"IS PREVIEW":"IS EVENT"),c.prototype.init=function(i,o){if(i=t.extend({lc:"EN",uri:l.clone(),scd:{},sgp:{},typ:{},wtp:{},lvp:{},rpp:{},ltp:{}},i),this.section=o,this.id=i.id,this.codename=i.codename,this.lc=i.lc,this.ssl=i.ssl,this.uri=i.uri,this.parentUri=i.parentUri,this.scd=i.scd,this.sgp=i.sgp,this.typ=i.typ,this.wtp=i.wtp,this.lvp=i.lvp,this.rpp=i.rpp,this.ltp=i.ltp,u())try{this.parentUri=new e(document.referrer)}catch(s){}this.search=this.getUri({parent:!0}).search(!0),this.stats=new n.Stats(this),this.preview=m.preview,r.locale(this.lc)},c.prototype.inIframe=u,c.prototype.getUri=function(t){return t=t||{},t.parent?this.parentUri||this.uri:this.uri},c.prototype.getSignupUrl=function(t){return s("{scheme}://{host}/w/{wid}/signup",this,t,{})},c.prototype.getSignupWidgetUrl=function(t){return s("{scheme}://{host}/w/{wid}/signup-widget",this,t,{})},c.prototype.getThanksUrl=function(t,e){return e=e||{},this.typ.ct?e.watchNow&&this.typ.wn_cu?this.typ.wn_cu:this.typ.cu:s("{scheme}://{host}/w/{wid}/thanks#{aid}",this,t,{})},c.prototype.getWaitUrl=function(t){return s("{scheme}://{host}/w/{wid}/wait#{aid}",this,t,{})},c.prototype.getLiveUrl=function(t){return s(m.preview?"/webinar/preview/live/{wid}/":"{scheme}://{host}/w/{wid}/live#{aid}",this,t,{})},c.prototype.getWatchNowUrl=function(t){return s("{scheme}://{host}/w/{wid}/watch-now#{aid}",this,t,{})},c.prototype.getReplayUrl=function(t){return s("{scheme}://{host}/w/{wid}/replay#{aid}",this,t,{})},c.prototype.getInstantReplayUrl=function(t){return s("{scheme}://{host}/w/{wid}/instant-replay#{aid}",this,t,{})},c.prototype.getLateUrl=function(t){return s("{scheme}://{host}/w/{wid}/late#{aid}",this,t,{})},c.prototype.getErrorUrl=function(t){return s("{scheme}://{host}/w/{wid}/error{?error*}",this,t,{})},c.prototype.getPublicAttendeeUrl=function(t){return s("{scheme}://{cdn}/a/{wid}/{aid}.json",this,t,{ssl:!0})},c.prototype.getApiSignupUrl=function(t){return s("{scheme}://{api}/webinar/public/signup/{wid}/",this,t,{ssl:!0})},c.prototype.getApiAttendeeUrl=function(t){return s("{scheme}://{api}/webinar/public/attendee/{wid}/{aid}/",this,t,{ssl:!0})},c.prototype.getApiStatsUrl=function(t){return s("{scheme}://{api}/webinar/public/stats/{wid}/",this,t,{ssl:!0})},c.prototype.getAttendee=function(t,e,i){var r,n=this;if(i=i||{},this.isPreview())this.getPreviewAttendee(t,i);else{if(i.aid||(i.aid=this.getUri().fragment()),r=i.aid,!r)return e({code:"attendee-id-error",attendee_id:r});n.getAttendeeFromCookie(r,t,function(){n.getAttendeeFromData(r,t,function(){n.getAttendeeFromApi(r,t,e)})})}},c.prototype.getPreviewAttendee=function(t,e){var i=r(),n=r.utc();("thanks"==e.section||"wait"==e.section)&&(i.add(1,"minutes"),n.add(1,"minutes")),t(new p({id:"0",nm:"John Doe",bd:i.format(),bu:n.format(),ir:!1,ro:0}))},c.prototype.getAttendeeFromCookie=function(e,i,r){var n;try{n=t.parseJSON(localStorage.getItem(e))}catch(o){r({code:"cookie-error",attendee_id:e})}try{i(new p(n))}catch(o){r({code:"cookie-error",attendee_id:e})}},c.prototype.getAttendeeFromData=function(e,i,r){t.getJSON(this.getPublicAttendeeUrl({aid:e})).promise().done(function(t){try{i(new p(t))}catch(n){r({code:"cdn-error",attendee_id:e})}}).fail(function(){r({code:"cdn-error",attendee_id:e})})},c.prototype.getAttendeeFromApi=function(e,i,r){t.get(this.getApiAttendeeUrl({aid:e})).promise().done(function(t){try{i(new p(t))}catch(n){r({code:"api-error",attendee_id:e})}}).fail(function(){r({code:"api-error",attendee_id:e})})},c.prototype.isLive=function(){return"l"==this.lvp.m},c.prototype.isReplay=function(){return"r"==this.rpp.m},c.prototype.isPreview=function(){return this.preview},p.prototype.init=function(e){if(e=t.extend({},e),0===(e.id||"").length||0===(e.nm||"").length||0===(e.bd||"").length||0===(e.bu||"").length)throw 404;try{r.utc(e.bd)}catch(i){throw 404}try{r.utc(e.bu)}catch(i){throw 404}if(!r.utc(e.bd).isValid())throw 404;if(!r.utc(e.bu).isValid())throw 404;this.id=e.id,this.nm=e.nm,this.bd=e.bd,this.bu=e.bu,this.ir=e.ir,this.ro=e.ro||0,this.setCookie()},p.prototype.setCookie=function(e){e=t.extend({currentTime:this.ro},e);try{localStorage.setItem(this.id,JSON.stringify({id:this.id,nm:this.nm,bd:this.bd,bu:this.bu,ir:this.ir,ro:e.currentTime}))}catch(i){}if(e.apiUpdateUrl)try{t.post(e.apiUpdateUrl,{ro:e.currentTime}).promise()}catch(i){}},{getWebinarById:a,getWebinarFromData:h}}blinkwebinars.define(["jquery","URI","URITemplate","moment","app/stats"],t)}();