!function(){"use strict";function e(e,o,d,s,l,p,u){function m(n){t=e.extend(a,n),u.getWebinarById({id:n.id,section:"signup"},c)}function c(e){d.locale(e.lc),r.selectOptions=s.template(r.selectOptions),r.errorList=s.template(r.errorList),i.lng=e.lc,i.resources[e.lc]={translation:window.translation||{}},l.init(i),n={now:d()},f(e)}function f(n){var a=g(n);e(function(){e(t.forms).each(function(t,i){var o,d,s,l=e(i);l.data("lock",!1),L(n,l),D(n,l),o=e("select[name=date]",l),d=e("select[name=time]",l),o.html(r.selectOptions({options:a})),o.on("change",function(e){e.preventDefault(),M(l,o,d,a)}),o.change(),n.sgp.pf&&(s="localhost"==window.location.hostname?"/assets/dist/lib/intlTelInput/utils.js":"https://assets.blinkwebinars.com/dist/lib/intlTelInput/utils.js",e("input[name=phone]",l).intlTelInput({utilsScript:s,nationalMode:!1})),l.on("submit",function(e){e.preventDefault(),O(n,l)})})}),h(n)}function h(e){e.stats.visit()}function g(e){var t,a,i=e.scd;return"ad"===i.ts&&(n.now=d(n.now.utcOffset(-1*i.tz))),t=[{label:l.t("Select a day"),value:"",times:[]}],i.ir&&t.push({label:l.t("Watch Now Instantly"),value:"instant-replay",times:[{label:l.t("Start Now"),value:"right-now"}]}),"sp"==i.ss?t=t.concat(_(i)):"ev"==i.ss?t=t.concat(v(i)):"on"==i.ss?t=t.concat(w(i)):"se"==i.ss&&(t=t.concat(y(i))),a=i.ir?t[2]:t[1],i.ir&&a.value===n.now.format("YYYY-MM-DD")&&a.times.unshift({label:l.t("Watch Now"),value:"right-now"}),t}function _(e){var t,a,i,r,o,s,p=[];s=n.now.utcOffset(),o=d(n.now).format("YYYY-MM-DD");for(var u=0;u<e.sd.length;u++)t=d(e.sd[u]),i=t.format("YYYY-MM-DD"),a=i==o?l.t("Watch Later Today"):t.format("ddd, LL"),r=b(t,e.st,null,[],{now:n.now}),r.valid&&p.push({label:a,value:i,times:r.times});return 0===p.length&&p.push({label:t.format("ddd, LL"),value:t.format("YYYY-MM-DD"),times:r.times}),p}function v(e){var t,a,i,r=k(e),o=e.hd,s=e.ad,p=[];for(a=d(n.now),i=l.t("Watch Later Today");p.length!=s;)t=b(a,e.st,r,o,{now:n.now}),t.valid&&p.push({label:i,value:a.format("YYYY-MM-DD"),times:t.times}),a.add(1,"days"),i=a.format("ddd, LL");return p}function w(e){var t,a,i,r=k(e),o=e.hd,s=e.ad,p=[];for(a=d(n.now).day(e.sw),i=a.isSame(n.now)?l.t("Watch Later Today"):a.format("ddd, LL");p.length!=s;)t=b(a,e.st,r,o,{now:n.now}),t.valid&&p.push({label:i,value:a.format("YYYY-MM-DD"),times:t.times}),a.add(7,"days"),i=a.format("ddd, LL");return p}function y(e){var t,a,i,r=k(e),o=e.hd,s=e.ad,p=[];for(a=d(n.now).day(e.sw[0]),i=a.isSame(n.now)?l.t("Watch Later Today"):a.format("ddd, LL");p.length!=s;)t=b(a,e.st,r,o,{now:n.now}),t.valid&&-1!=e.sw.indexOf(a.day())&&p.push({label:i,value:a.format("YYYY-MM-DD"),times:t.times}),a.add(1,"days"),i=a.format("ddd, LL");return p}function b(e,t,n,a,i){var r,o,d=e.format("YYYY-MM-DD");if(o={valid:(!n||d<n.f||d>n.t)&&-1==a.indexOf(d),times:[]},o.valid){for(var s=0;s!=t.length;s++)r=Y(e,t[s],i),r.valid&&o.times.push({label:r.label,value:r.value});o.valid=0!==o.times.length}return o}function Y(t,a,i){var r,o=a.split(":"),s=o[0],l=o[1];return r=d(n.now).set({year:t.get("year"),month:t.get("month"),date:t.get("date"),hour:s,minute:l,second:0,millisecond:0}),i=e.extend({now:n.now},i),{valid:r.isAfter(i.now),label:r.format("hh:mm A"),value:a}}function k(e){function t(e){return d(r).add(e,"days")}var a,i,r=d(n.now);return"TODAY"==e.bl?a=r:"TODAY_TOMORROW"==e.bl?a=t(1):"NEXT_2"==e.bl?a=t(2):"NEXT_3"==e.bl?a=t(3):"NEXT_4"==e.bl?a=t(4):"NEXT_5"==e.bl?a=t(5):"NEXT_6"==e.bl?a=t(6):"NEXT_7"==e.bl&&(a=t(7)),a&&(i={f:r.format("YYYY-MM-DD"),t:a.format("YYYY-MM-DD")}),i}function L(t,n){var a;a=e("input[type=hidden][name=tracking_source]",n),a.length||n.prepend('<input type="hidden" name="tracking_source">'),a=e("input[type=hidden][name=tracking_medium]",n),a.length||n.prepend('<input type="hidden" name="tracking_medium">'),a=e("input[type=hidden][name=tracking_term]",n),a.length||n.prepend('<input type="hidden" name="tracking_term">'),a=e("input[type=hidden][name=tracking_content]",n),a.length||n.prepend('<input type="hidden" name="tracking_content">'),a=e("input[type=hidden][name=tracking_campaign]",n),a.length||n.prepend('<input type="hidden" name="tracking_campaign">'),a=e("input[type=hidden][name=user_tz]",n),a.length||n.prepend(e('<input type="hidden" name="user_tz">')),a=e("input[type=hidden][name=user_info_utc_offset]",n),a.length||n.prepend(e('<input type="hidden" name="user_info_utc_offset">')),a=e("input[type=hidden][name=ad_id]",n),a.length||n.prepend(e('<input type="hidden" name="ad_id">')),a=e("input[type=hidden][name=adset_id]",n),a.length||n.prepend(e('<input type="hidden" name="adset_id">')),a=e("input[type=hidden][name=campaign_id]",n),a.length||n.prepend(e('<input type="hidden" name="campaign_id">'))}function D(t,a){var i=t.getUri({parent:!0}),r=i.search(!0),o=i.clone().search(i.fragment()).search(!0),d=e.extend({},r,o);e("input[name=name]",a).val(d.name||d.full_name||d.firstname||d.first_name),e("input[name=email]",a).val(d.email||d.mail||d["e-mail"]),e("input[name=phone]",a).val(d.phone||d.tel),e("input[type=hidden][name=tracking_source]",a).val(t.stats.tracking.source),e("input[type=hidden][name=tracking_medium]",a).val(t.stats.tracking.medium),e("input[type=hidden][name=tracking_term]",a).val(t.stats.tracking.term),e("input[type=hidden][name=tracking_content]",a).val(t.stats.tracking.content),e("input[type=hidden][name=tracking_campaign]",a).val(t.stats.tracking.campaign),e("input[type=hidden][name=user_tz]",a).val((new Date).getTimezoneOffset()),e("input[type=hidden][name=user_info_utc_offset]",a).val(n.now.utcOffset()),e("input[type=hidden][name=ad_id]",a).val(d.ad_id),e("input[type=hidden][name=adset_id]",a).val(d.adset_id),e("input[type=hidden][name=campaign_id]",a).val(d.campaign_id)}function M(e,t,n,a){var i,o=t.val();i=s.find(a,function(e){return e.value==o}),n.html(r.selectOptions({options:i?i.times:[],defaultOption:{label:l.t("Select a time"),selected:!0}}))}function O(t,n){t.isPreview()||n.data("lock")||(n.data("lock",!0),e.post(t.getApiSignupUrl(),n.serialize()).promise().done(function(e){e.success?T(t,e.attendee):S(n,e.errors)}).fail(function(){S(n,{__all__:[l.t("Something went wrong, please try again in a few minutes")]})}).always(function(){n.data("lock",!1)}))}function T(e,t){var n,a,i;i={name:t.name,$email:t.email},t.phone&&(i.phone=t.phone),e.stats.signup({aid:t.id}),n=new o(e.getThanksUrl({aid:t.id},{watchNow:t.ir})),e.typ.ud&&n.addSearch({webinar_id:e.id,tracking_source:t.tracking_source,tracking_medium:t.tracking_medium,tracking_term:t.tracking_term,tracking_content:t.tracking_content,tracking_campaign:t.tracking_campaign,attendee_id:t.id,attendee_date:t.bu,ean:t.ean,eae:t.eae}),e.typ.df&&n.addSearch({attendee_name:t.nm,attendee_email:t.em,attendee_email_md5:t.eh,attendee_phone:t.pn}),e.typ.ct&&(a=t.ir?e.getWatchNowUrl({aid:t.id}):e.getLiveUrl({aid:t.id}),n.addSearch({webinar_url:a})),e.stats.setLiveSalePixelCookie({aid:t.id});try{localStorage.setItem(t.id,JSON.stringify({id:t.id,nm:t.nm,bd:t.bd,bu:t.bu,ir:t.ir}))}catch(r){}N(e,n.href())}function S(t,n){e("[webinar-component='signup.form.errors.all']",t).html(r.errorList({errors:n.__all__})),e("[webinar-component='signup.form.errors.name']",t).html(r.errorList({errors:n.name})),e("[webinar-component='signup.form.errors.email']",t).html(r.errorList({errors:n.email})),e("[webinar-component='signup.form.errors.phone']",t).html(r.errorList({errors:n.phone})),e("[webinar-component='signup.form.errors.date']",t).html(r.errorList({errors:n.date})),e("[webinar-component='signup.form.errors.time']",t).html(r.errorList({errors:n.time}))}function N(e,t){e.inIframe()?window.parent.postMessage("bw-signup-success:"+t,"*"):window.location.replace(t)}return{run:m}}blinkwebinars.define(["jquery","URI","moment","underscore","i18next","intlTelInput/intlTelInput","app/core"],e);var t,n,a={forms:"[webinar-component='signup.form']"},i={nsSeparator:!1,keySeparator:!1,resources:{}},r={selectOptions:'<% if (typeof defaultOption != "undefined" ) { %><option value="<%= defaultOption.value %>"<% if (defaultOption.selected) { %> selected="selected"<% } %>><%= defaultOption.label %></option><% } %><% _.each(options, function(option) { %><option value="<%= option.value %>"<% if (option.selected) { %> selected="selected"<% } %>><%= option.label %></option><% }); %>',errorList:'<ul class="errorlist"><% _.each(errors, function(error) { %><li><%= error %></li><% }); %></ul>'}}();